<div id="tb963TEST" style="background-color: pink;">
	<?php $_order = $this->getOrder();

	$supplierArray = array();
	$productsArray = array();
	$_items = $this->getItemsCollection();

	foreach ($_items as $_item){
		$product_id = $_item -> getProductId();
		$product=Mage::getModel("catalog/product")->load($product_id);
		$supplier = $product->getAttributeText("supplier");


		//element not inside array
		if(!in_array($supplier, $supplierArray)){
			array_push($supplierArray, $supplier);
		}

		$qty = (int)$_item->getQtyOrdered();
		$sku = $_item->getSku();
		$supplierSku = $product -> _getData("supplier_sku");
		$name = $_item->_getData('name');

		$tmpArray = array(
			"supplierSku" =>$supplierSku,
			"sku"=> $sku,
			"name" =>$name,
			"qty" =>$qty
			);

		$arrayLng = count($productsArray[$supplier]);
		echo "<strong>arrayLng: </strong>";
		echo '<pre>';
		print_r($arrayLng);
		echo '</pre>';
		print "<br />";

		$productsArray[$supplier][$arrayLng] = $tmpArray;
		

		echo "<strong>tmpArray: </strong>";
		echo '<pre>';
		print_r($tmpArray);
		echo '</pre>';
		print "<br />";
		print "<br />";
		print "<br />";

		unset($tmpArray);
	}
	print "\n\r";
	print "\n\r";
	print "\n\r";
	echo "<strong>productsArray: </strong>";
	echo '<pre>';
	print_r($productsArray);
	echo '</pre>';	?>
	<select id="selectTEST">
		<?php 
		foreach($supplierArray as $key => $value){
			echo "<option>".$value."</option>"; 
		}
		?>
	</select>
	<button class="js-textareacopybtn">Copy Textarea</button>
	<br />
	<br />
	<br />

	<textarea class="mailBody" style="background-color:gray; width:95%; height:600px" readonly>
		<?php 
		print "\n\r"."Hello,"."\n\r";
		print "Please can we place an order for:"."\n\r";

		/*$_items = $this->getItemsCollection();
		foreach ($_items as $_item){
			$qty = (int)$_item->getQtyOrdered();
			$sku = $_item->getSku();
			$name = $_item->_getData('name');

			$product_id = $_item -> getProductId();
			$product=Mage::getModel("catalog/product")->load($product_id);
			$supplierSku = $product -> _getData("supplier_sku");
			$supplier = $product->getAttributeText("supplier");


			print $qty."x ".$supplierSku.": ".$name."\n\r";
			print $supplier."\n\r";
		};*/
		print "\n\r";

		print "\n\r";
		print "Delivery address:"."\n\r";
		print $_order->getShippingAddress()->getFormated(false);

		print "\n\r";
		print "Many thanks,"."\n\r";
		?>
	</textarea>

	<script>
		var copyTextareaBtn = document.querySelector('.js-textareacopybtn');

		copyTextareaBtn.addEventListener('click', function(event) {
		  var copyTextarea = document.querySelector('.mailBody');
		  copyTextarea.select();

		  try {
			var successful = document.execCommand('copy');
			var msg = successful ? 'successful' : 'unsuccessful';
			console.log('Copying text command was ' + msg);
		  } catch (err) {
			console.log('Oops, unable to copy');
		  }
		});
	</script>
</div>
<br />